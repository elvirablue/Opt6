(window.webpackJsonp=window.webpackJsonp||[]).push([[1,7],{331:function(t,e,n){var content=n(339);content.__esModule&&(content=content.default),"string"==typeof content&&(content=[[t.i,content,""]]),content.locals&&(t.exports=content.locals);(0,n(62).default)("9c9f4c84",content,!0,{sourceMap:!1})},336:function(t,e,n){var content=n(353);content.__esModule&&(content=content.default),"string"==typeof content&&(content=[[t.i,content,""]]),content.locals&&(t.exports=content.locals);(0,n(62).default)("26b7ec7b",content,!0,{sourceMap:!1})},338:function(t,e,n){"use strict";n(331)},339:function(t,e,n){var o=n(61)((function(i){return i[1]}));o.push([t.i,'[data-v-553d2378]:root{--text-color:#000;--light-text-color:#161616;--surface-color:#fff;--grey-color:#8f8f8f;--primary-color:#1253a2;--light-primary-color:#2f8cff;--lighther-primary-color:#a6b7d4;--error-color:#ae0a0a;--main-background:#fbfcfd;--border-color:#eeeff1;--action-border-color:#ccc;--main-font-family:"Myriad Pro";--action-height:35px;--root-radius:5px;--mq-desktop:1280px;--mq-mobile:960px;--desktop-padding:25px 25px;--mobile-padding:10px 16px;--main-padding:25px}.input[data-v-553d2378]{align-items:center;border:1px solid #ccc;border:1px solid var(--action-border-color);border-radius:5px;border-radius:var(--root-radius);box-shadow:none;display:inline-flex;height:35px;height:var(--action-height);outline:none;padding:0 5px 0 15px;transition:border-color .1s ease-in-out;width:100%}.input[data-v-553d2378]:focus{border-color:#1253a2;border-color:var(--primary-color)}input[data-v-553d2378]::-webkit-inner-spin-button,input[data-v-553d2378]::-webkit-outer-spin-button{-webkit-appearance:none;margin:0}',""]),o.locals={},t.exports=o},343:function(t,e,n){"use strict";n.r(e);n(114),n(63),n(199);var o={name:"AtomBaseInput",props:{value:{type:[String,Number],required:!0},type:{type:String,default:"text"}},computed:{localValue:{get:function(){return this.value},set:function(t){this.$emit("input",t)}}}},r=(n(338),n(32)),component=Object(r.a)(o,(function(){var t=this,e=t._self._c;return"checkbox"===t.type?e("input",t._b({directives:[{name:"model",rawName:"v-model",value:t.localValue,expression:"localValue"}],staticClass:"input",attrs:{type:"checkbox"},domProps:{checked:Array.isArray(t.localValue)?t._i(t.localValue,null)>-1:t.localValue},on:{blur:function(e){return t.$emit("blur")},change:function(e){var n=t.localValue,o=e.target,r=!!o.checked;if(Array.isArray(n)){var l=t._i(n,null);o.checked?l<0&&(t.localValue=n.concat([null])):l>-1&&(t.localValue=n.slice(0,l).concat(n.slice(l+1)))}else t.localValue=r}}},"input",t.$attrs,!1)):"radio"===t.type?e("input",t._b({directives:[{name:"model",rawName:"v-model",value:t.localValue,expression:"localValue"}],staticClass:"input",attrs:{type:"radio"},domProps:{checked:t._q(t.localValue,null)},on:{blur:function(e){return t.$emit("blur")},change:function(e){t.localValue=null}}},"input",t.$attrs,!1)):e("input",t._b({directives:[{name:"model",rawName:"v-model",value:t.localValue,expression:"localValue"}],staticClass:"input",attrs:{type:t.type},domProps:{value:t.localValue},on:{blur:function(e){return t.$emit("blur")},input:function(e){e.target.composing||(t.localValue=e.target.value)}}},"input",t.$attrs,!1))}),[],!1,null,"553d2378",null);e.default=component.exports},352:function(t,e,n){"use strict";n(336)},353:function(t,e,n){var o=n(61)((function(i){return i[1]}));o.push([t.i,'[data-v-ef8b2472]:root{--text-color:#000;--light-text-color:#161616;--surface-color:#fff;--grey-color:#8f8f8f;--primary-color:#1253a2;--light-primary-color:#2f8cff;--lighther-primary-color:#a6b7d4;--error-color:#ae0a0a;--main-background:#fbfcfd;--border-color:#eeeff1;--action-border-color:#ccc;--main-font-family:"Myriad Pro";--action-height:35px;--root-radius:5px;--mq-desktop:1280px;--mq-mobile:960px;--desktop-padding:25px 25px;--mobile-padding:10px 16px;--main-padding:25px}.data-desktop__settings[data-v-ef8b2472]{align-items:center;display:flex;justify-content:flex-end;min-height:32px;padding:0 10px}.data-desktop__result[data-v-ef8b2472]{padding:15px 15px 25px}.data-desktop .card.-table-result[data-v-ef8b2472]{width:246px}.data-mobile__result[data-v-ef8b2472]{padding:15px 0 0}.data-result[data-v-ef8b2472]{align-items:flex-end;display:flex;flex-direction:column}.data-result>*+*[data-v-ef8b2472]{margin-top:5px}.button.-icon.-in-table[data-v-ef8b2472]{margin:-1px 0 1px;padding:5px}.card.-table-result[data-v-ef8b2472]{background-color:#fbfcfd;background-color:var(--main-background);box-shadow:none;font-size:14px;padding:15px;width:100%}.card.-table-result .card__item[data-v-ef8b2472]{grid-column-gap:15px;display:grid;grid-template-columns:1fr auto;padding-bottom:15px}.card.-table-result .card__item[data-v-ef8b2472]:last-child{padding-bottom:0}.card.-table-result .card__item-title[data-v-ef8b2472]{color:#8f8f8f;color:var(--grey-color);display:inline-flex}.card.-table-result .card__item-value[data-v-ef8b2472]{display:inline-flex;justify-content:flex-end}',""]),o.locals={},t.exports=o},359:function(t,e,n){var content=n(372);content.__esModule&&(content=content.default),"string"==typeof content&&(content=[[t.i,content,""]]),content.locals&&(t.exports=content.locals);(0,n(62).default)("2e8e679c",content,!0,{sourceMap:!1})},364:function(t,e,n){"use strict";n.r(e);n(114),n(45),n(39),n(83),n(38),n(84);var o=n(37);n(44),n(20),n(47),n(199),n(46),n(25),n(48),n(351);function r(object,t){var e=Object.keys(object);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(object);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(object,t).enumerable}))),e.push.apply(e,n)}return e}function l(t){for(var i=1;i<arguments.length;i++){var source=null!=arguments[i]?arguments[i]:{};i%2?r(Object(source),!0).forEach((function(e){Object(o.a)(t,e,source[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(source)):r(Object(source)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(source,e))}))}return t}var c={name:"MoleculeMaintenanceTableWriteOffItem",emits:["update:draggableItem","move-item","click-action","save"],props:{data:{type:Array,default:function(){return[]}},savedData:{type:Array,default:function(){return[]}},draggableItem:{type:null|Object}},data:function(){return{fields:[{name:"number",title:"Номер",editable:!1,visible:!0,mobileVisible:!1},{name:"actions",title:"Действие",editable:!1,visible:!0,mobileVisible:!0},{name:"unitName",title:"Наименование единицы",editable:!0,visible:!0,mobileVisible:!0},{name:"price",title:"Цена",editable:!0,visible:!0,mobileVisible:!0},{name:"quantity",title:"Кол-во",editable:!0,visible:!0,unit:"шт",calculate:!0,mobileVisible:!0},{name:"productName",title:"Название товара",editable:!0,visible:!0,mobileVisible:!1},{name:"amount",title:"Сумма",editable:!0,visible:!0,unit:"руб",calculate:!0,mobileVisible:!0},{name:"weight",title:"Общий вес",editable:!0,visible:!1,unit:"кг",calculate:!0,mobileVisible:!0},{name:"total",title:"Итого",editable:!0,visible:!0,mobileVisible:!0}]}},computed:{localDraggableItem:{get:function(){return this.draggableItem},set:function(t){this.$emit("update:draggableItem",t)}},settings:function(){return[{name:"fields",title:"Отображение столбцов",list:this.fields}]},activeDesktopFields:function(){return this.fields.filter((function(t){return t.visible}))},activeMobileFields:function(){return this.fields.filter((function(t){return t.mobileVisible}))},calcTotals:function(){var t=this;return this.fields.filter((function(t){return t.calculate})).map((function(e){return l(l({},e),{},{value:t.data.reduce((function(t,n){return t+Number(n[e.name])}),0).toLocaleString()})}))},totalAmount:function(){return(Number(this.calcTotals[0].value.replace(/\s/g,""))*Number(this.calcTotals[1].value.replace(/\s/g,""))).toLocaleString()}},methods:{saveChange:function(t,e){var n=this.data.findIndex((function(e){return e.id===t.id}));this.data[n][e]!==this.savedData[n][e]&&this.$emit("save")},clickAction:function(t,e){this.$emit("click-action",t,e)}}},d=(n(352),n(32)),component=Object(d.a)(c,(function(){var t=this,e=t._self._c;return e("div",{class:{"data-mobile":t._isMobile,"data-desktop":!t._isMobile}},[t._isMobile?t._e():e("div",{staticClass:"data-desktop__settings"},[e("molecules-maintenance-tables-settings",{model:{value:t.settings,callback:function(e){t.settings=e},expression:"settings"}})],1),t._v(" "),e(t._isMobile?"atoms-table-mobile":"atoms-table-desktop",{tag:"component",attrs:{fields:t._isMobile?t.activeMobileFields:t.activeDesktopFields,data:t.data,"draggable-item":t.localDraggableItem},on:{"update:draggableItem":function(e){t.localDraggableItem=e},"update:draggable-item":function(e){t.localDraggableItem=e},"move-item":function(e){return t.$emit("move-item",e)}},scopedSlots:t._u([{key:"number",fn:function(n){var o=n.item;return[t.data.length>1?e("button",{staticClass:"button -icon -in-table tr-handle",attrs:{type:"button"}},[e("atoms-base-icon",{attrs:{name:"burger-menu"}})],1):t._e(),t._v(" "),e("span",{domProps:{textContent:t._s(o.number)}})]}},{key:"actions",fn:function(n){var o=n.item;return[e("atoms-base-dropdown",{attrs:{placement:"bottom-start",width:"180px"},scopedSlots:t._u([{key:"popper",fn:function(){return t._l(o.actions,(function(n,r){return e("button",{key:"action-".concat(o.id,"-").concat(r),class:{"button -text -small":!0,"-red":"red"===n.color},attrs:{type:"button"},domProps:{textContent:t._s(n.title)},on:{click:function(e){return t.$emit("click-action",o,n.type)}}})}))},proxy:!0}],null,!0)},[e("button",{staticClass:"button -icon -in-table",attrs:{type:"button"}},[e("atoms-base-icon",{attrs:{name:"menu"}})],1)])]}},{key:"unitName",fn:function(n){var o=n.item;return[e("atoms-base-input",{on:{blur:function(e){return t.saveChange(o,"unitName")}},model:{value:o.unitName,callback:function(e){t.$set(o,"unitName",e)},expression:"item.unitName"}})]}},{key:"price",fn:function(n){var o=n.item;return[e("atoms-base-input",{attrs:{type:"number"},on:{blur:function(e){return t.saveChange(o,"price")}},model:{value:o.price,callback:function(e){t.$set(o,"price",e)},expression:"item.price"}})]}},{key:"quantity",fn:function(n){var o=n.item;return[e("atoms-base-input",{attrs:{type:"number"},on:{blur:function(e){return t.saveChange(o,"quantity")}},model:{value:o.quantity,callback:function(e){t.$set(o,"quantity",e)},expression:"item.quantity"}})]}},{key:"productName",fn:function(n){var o=n.item;return[e("atoms-base-input",{on:{blur:function(e){return t.saveChange(o,"productName")}},model:{value:o.productName,callback:function(e){t.$set(o,"productName",e)},expression:"item.productName"}})]}},{key:"amount",fn:function(n){var o=n.item;return[e("atoms-base-input",{attrs:{type:"number"},on:{blur:function(e){return t.saveChange(o,"amount")}},model:{value:o.amount,callback:function(e){t.$set(o,"amount",e)},expression:"item.amount"}})]}},{key:"weight",fn:function(n){var o=n.item;return[e("atoms-base-input",{attrs:{type:"number"},on:{blur:function(e){return t.saveChange(o,"weight")}},model:{value:o.weight,callback:function(e){t.$set(o,"weight",e)},expression:"item.weight"}})]}},{key:"total",fn:function(n){var o=n.item;return[e("atoms-base-input",{attrs:{type:"number"},on:{blur:function(e){return t.saveChange(o,"total")}},model:{value:o.total,callback:function(e){t.$set(o,"total",e)},expression:"item.total"}})]}}])}),t._v(" "),e("div",{class:{"data-mobile__result":t._isMobile,"data-desktop__result":!t._isMobile}},[e("div",{staticClass:"data-result"},[e("div",{staticClass:"card -table-result"},t._l(t.calcTotals,(function(n,o){return e("div",{key:"total-".concat(o),staticClass:"card__item"},[e("span",{staticClass:"card__item-title",domProps:{textContent:t._s("".concat(n.title,":"))}}),t._v(" "),e("span",{staticClass:"card__item-value",domProps:{textContent:t._s("".concat(n.value," ").concat(n.unit))}})])})),0),t._v(" "),e("div",{staticClass:"card -table-result"},[e("div",{staticClass:"card__item"},[e("span",{staticClass:"card__item-title",domProps:{textContent:t._s("Общая сумма:")}}),t._v(" "),e("span",{staticClass:"card__item-value",domProps:{textContent:t._s("".concat(t.totalAmount," руб"))}})])])])])],1)}),[],!1,null,"ef8b2472",null);e.default=component.exports;installComponents(component,{MoleculesMaintenanceTablesSettings:n(365).default,AtomsBaseIcon:n(341).default,AtomsBaseDropdown:n(342).default,AtomsBaseInput:n(343).default})},371:function(t,e,n){"use strict";n(359)},372:function(t,e,n){var o=n(61)((function(i){return i[1]}));o.push([t.i,'[data-v-21c6de85]:root{--text-color:#000;--light-text-color:#161616;--surface-color:#fff;--grey-color:#8f8f8f;--primary-color:#1253a2;--light-primary-color:#2f8cff;--lighther-primary-color:#a6b7d4;--error-color:#ae0a0a;--main-background:#fbfcfd;--border-color:#eeeff1;--action-border-color:#ccc;--main-font-family:"Myriad Pro";--action-height:35px;--root-radius:5px;--mq-desktop:1280px;--mq-mobile:960px;--desktop-padding:25px 25px;--mobile-padding:10px 16px;--main-padding:25px}.content__actions[data-v-21c6de85]{display:block;padding-bottom:25px;padding-bottom:var(--main-padding)}.card.-table[data-v-21c6de85]{padding:0}',""]),o.locals={},t.exports=o},381:function(t,e,n){"use strict";n.r(e);n(199),n(200),n(20),n(38);var o=n(369),r={id:"",number:"",actions:[{type:"delete",title:"Удалить",color:"red"}],unitName:"",price:"",quantity:"",productName:"",total:"",amount:"",weight:""},l={name:"OrganismMaintenanceWriteOffItem",data:function(){return{data:[{id:"100",number:"1",actions:[{type:"delete",title:"Удалить",color:"red"}],unitName:"lsknjcsnc",price:"1000",quantity:"123",productName:"jscvsjdbvjsb",total:"4000",amount:"10",weight:"2"},{id:"120",number:"2",actions:[{type:"delete",title:"Удалить",color:"red"}],unitName:"lsknxxxxxxxxxxxxxxxxxxxxjcsnc",price:"10",quantity:"123",productName:"jscvsjdbvjsb",total:"4000",amount:"30",weight:"3"}],draggableItem:null,savedData:[]}},created:function(){this.savedData=Object(o.cloneDeep)(this.data)},methods:{saveChange:function(){console.debug("api request: save change item"),this.savedData=Object(o.cloneDeep)(this.data)},addItem:function(){console.debug("api request: add new item");var t=Object.assign({},r);t.number=this.data.length+1,t.id=Number(Object(o.last)(this.data).id)+1,this.data.splice(this.data.length,0,t),this.savedData=Object(o.cloneDeep)(this.data)},clickAction:function(t,e){"delete"===e&&this.deleteItem(t)},deleteItem:function(t){console.debug("api request: delete item"),Object(o.remove)(this.data,(function(e){return e.id===t.id})),this.updateNumbersItems()},updateNumbersItems:function(){this.data.forEach((function(t,e){return t.number=e+1})),this.savedData=Object(o.cloneDeep)(this.data)},moveItem:function(t){var e=this;return null===this.draggableItem||(t.oldIndex===t.newIndex?(this.localDraggableItem=null,!0):(console.debug("api request: move item"),Object(o.remove)(this.data,(function(t){return t.id===e.draggableItem.id})),this.data.splice(t.newIndex,0,this.draggableItem),void this.updateNumbersItems()))}}},c=(n(371),n(32)),component=Object(c.a)(l,(function(){var t=this,e=t._self._c;return e("div",{staticClass:"content"},[e("div",{staticClass:"content__actions"},[e("div",{staticClass:"card"},[e("button",{staticClass:"button",attrs:{type:"button"},on:{click:t.addItem}},[e("atoms-base-icon",{attrs:{name:"plus"}}),t._v(" "),e("span",{domProps:{textContent:t._s("Добавить строку")}})],1)])]),t._v(" "),e("div",{staticClass:"content__table"},[e("div",{class:{"card -table":!t._isMobile}},[e("molecules-maintenance-tables-write-off-item",{attrs:{data:t.data,"draggable-item":t.draggableItem,"saved-data":t.savedData},on:{"update:draggableItem":function(e){t.draggableItem=e},"update:draggable-item":function(e){t.draggableItem=e},save:t.saveChange,"click-action":t.clickAction,"move-item":t.moveItem}})],1)])])}),[],!1,null,"21c6de85",null);e.default=component.exports;installComponents(component,{AtomsBaseIcon:n(341).default,MoleculesMaintenanceTablesWriteOffItem:n(364).default})}}]);